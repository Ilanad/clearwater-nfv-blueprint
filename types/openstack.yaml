node_types:
  clearwater.nodes.MonitoredServer:
    derived_from: cloudify.openstack.nodes.Server
    properties:
      agent_config:
        default:
          install_method: remote
          user: { get_input: agent_user }
          key: { get_property: [ key, private_key_path ] }
      server:
        default:
          image: { get_input: image }
          flavor: { get_input: flavor }
      management_network_name:
        default:
          { get_property: [ private_network, resource_id ] }
    interfaces:
      cloudify.interfaces.monitoring_agent:
        install:
          implementation: diamond.diamond_agent.tasks.install
          inputs:
            diamond_config:
              default:
                interval: 10
        start: diamond.diamond_agent.tasks.start
        stop: diamond.diamond_agent.tasks.stop
        uninstall: diamond.diamond_agent.tasks.uninstall

